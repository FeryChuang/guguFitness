<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Hugo 0.101.0">
    <title>Pricing example · Bootstrap v4.6</title>

    <link rel="canonical" href="https://getbootstrap.com/docs/4.6/examples/pricing/">

    <!-- 引入 jQuery 库 -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- Bootstrap core CSS -->
    <link href="../assets/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="css/pricing.css" rel="stylesheet">
    <script src="css/chick.js"></script>
</head>
<body>

<div class="d-flex flex-column flex-md-row align-items-center p-3 px-md-4 mb-3 bg-white border-bottom shadow-sm">
    <h5 class="my-0 mr-md-auto font-weight-normal">Company name</h5>
    <nav class="my-2 my-md-0 mr-md-3">
        <a class="p-2 text-dark" href="#">Schedule</a>
        <a class="p-2 text-dark" href="#">Enterprise</a>
        <a class="p-2 text-dark" href="#">Support</a>
        <a class="p-2 text-dark" href="#">Pricing</a>
    </nav>
    <a class="btn btn-outline-primary" href="#">Sign up</a>
</div>

<div class="pricing-header px-3 py-3 pt-md-5 pb-md-4 mx-auto text-center">
    <div class="card-header rounded-pill bg-warning border-warning " style="text-align: center; color: ghostwhite; font-size: 25px;">UserName</div>
    <br>
    <img id="clickableImage" src="img/egg.png" class="rounded mx-auto d-block" width="200px" height="200px">
    <br>

    <div class="container">
        <div class="card-deck mb-2 text-center"></div>

        <div class="container mt-5">
            <!-- 等级和经验条显示区域 -->
            <p class="chick-label">等级: <span class="chick-value" id="currentLevelValue"></span></p>
            <div class="progress">
                <div id="progressBar" class="progress-bar bg-warning" role="progressbar" aria-valuenow="0"
                     aria-valuemin="0" aria-valuemax="100">0%
                </div>
            </div>
        </div>

        <br>
        <div class="card border-warning mb-3" style="max-width: 100rem; min-width: 0rem;">
            <div class="card-body text-warning">
                <h5 class="card-title">Success card title</h5>
                <p class="card-text">Some quick example text to build on the card title and make up the bulk of the
                    card's content.</p>
                <button id="increaseButton" class="btn btn-primary mt-3">Increase Experience</button>
            </div>
        </div>
        <div class="container">
            <div class="chick-card">
                <div class="avatar-frame">
                </div>
                <div class="chick-info">
                    <p class="chick-label">主人名稱: <span class="chick-value" id="userNameValue"></span></p>
                    <p class="chick-label">等级: <span class="chick-value" id="currentLevelValue"></span></p>
                    <p class="chick-label">重生次數: <span class="chick-value" id="lifecountValue"></span></p>
                    <p class="chick-label">階級: <span class="chick-value" id="chickStageValue"></span></p>
                    <p class="chick-label">經驗值: <span class="chick-value" id="currentExpValue"></span></p>
                </div>
            </div>
        </div>
    </div>

    <script>
    $(document).ready(start);

    function start() {
        // 使用会话存储检索Chick信息
        $.get('http://localhost:8080/chick/info', function (data) {

            if (data) {
                // 如果会话数据存在，将小鸡信息显示在页面上
                $('#userNameValue').html(data.userName);
                $('#lifecountValue').html(data.lifecount);
                $('#chickStageValue').html(data.chickStage);
                $('#currentExpValue').html(data.currentExp);

                // 计算等级和更新经验条
                var level = calculateLevel(data.currentExp);
                $('#currentLevelValue').html(level + 1); // 显示等级为当前结果加1

                updateProgressBar(data.currentExp, level);
            } else {
                // 如果会话数据不存在，显示相应的消息
                $('#userNameValue').text("Chick Info Not Available");
            }
        });

        function calculateLevel(currentExp) {
            // 根据经验计算规则计算等级
            // 这里需要根据您的规则进行具体实现
            // 示例代码中是一个简单的等级计算规则
            var requiredExpByLevel = [0, 100, 300, 600, 1000, 1500, 2100, 2800, 3600, 4500];
            for (var i = 1; i < requiredExpByLevel.length; i++) {
                if (currentExp < requiredExpByLevel[i]) {
                    return i - 1;
                }
            }
            return requiredExpByLevel.length - 1;
        }

        function updateProgressBar(currentExp, currentLevel) {
            // 计算经验条百分比
            var requiredExpByLevel = [0, 100, 300, 600, 1000, 1500, 2100, 2800, 3600, 4500];
            var requiredExp = requiredExpByLevel[currentLevel];
            var nextLevelExp = requiredExpByLevel[currentLevel + 1];
            var expPercentage = ((currentExp - requiredExp) / (nextLevelExp - requiredExp)) * 100;

            // 更新经验条显示
            $("#progressBar").css("width", expPercentage + "%").attr("aria-valuenow", expPercentage).text(expPercentage.toFixed(2) + "%");
        }
    }

    $(document).ready(function () {
        var currentProgress = 0; // 初始进度为 0

        // 按钮点击事件
        $("#increaseButton").click(function () {
            if (currentProgress < 25) {
                currentProgress += 5; // 每次增加 5%
                $("#progressBar").css("width", currentProgress + "%").attr("aria-valuenow", currentProgress).text(currentProgress + "%");
            }
        });
    });

    </script>
</body>
</html>
